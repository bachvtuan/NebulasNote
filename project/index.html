<!DOCTYPE html>
<html>
<head>
	<title>Nebulas Note</title>
  <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.4/foundation.min.css'>
  <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
  <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Nunito'>
	<link rel='stylesheet prefetch' href='style.css'>
	<script type="text/javascript" src="js/sjcl.js" ></script>
</head>
<body>
<div id="main">
  <v-app>
      <div class="container app">
        <router-view></router-view>  
      </div>
  </v-app>
</div>  
<template id="todo">
  <note-list :pnotes="notes"></note-list>
</template>

<template id="login">
    
  <div class="login notes">
    <div v-if="!extension_installed">
      <p>You need install chrome extension before continue. Install link <a  target="_blank" href="https://github.com/ChengOrangeJu/WebExtensionWallet">WebExtensionWallet</a>
    </div>
    <div v-if="extension_installed">
      <loading-item v-if="show_loading"></loading-item>
      <p v-if="checking"><i class="fa fa-spinner fa-spin fa-fw"></i> Please wait &nbsp; [You need import wallet into extension first] </p>
      <div v-if="!checking">
        <div v-if="!encrypt_password">
            <p>For first usage, You need register by enter password to protect your list</p>
            <input v-model="password" type="password" @keyup.enter="register" placeholder="Input strong password">
            <button v-on:click="register" class="success button">Register</button>
        </div>
        <div v-if="encrypt_password">
            <p>Your acccount is found on NAS blockchain,Enter your password to access:</p>
            <input v-model="v_password" type="password" @keyup.enter="login" placeholder="Input password">
            <button v-on:click="login"  class="success button" >Login</button>
        </div>
      </div>
    </div>

  </div>
</template>

<template id="note-list">
    <section class="notes">
      <loading-item v-if="show_loading"></loading-item>
      <div class="title">
        <h1>
          Nebulas Note  
          <transition name="fade">
            <small v-if="totalNotes">({{ totalNotes }})</small>
          </transition>
          
        </h1>
        <a  class="pull-right" @click="logOut" >Logout <i class="fa fa-sign-out"></i></a>
      </div>

      <div class="notes__new input-group">
        <input type="text"
               class="input-group-field"
               v-model="newNote"
               @keyup.enter="addNote"
               placeholder="New note"
        >
        <span class="input-group-button">
          <button @click="addNote" 
                  class="button"
          >
            <i class="fa fa-plus"></i> Add
          </button>
        </span>
      </div>

     
      <div data-alert class="alert-box" v-if="notes.length==0">
        You don't have any note
      </div>
      
      <transition-group name="fade" tag="ul" class="notes__list no-bullet">
          <note-item v-for="(note, index) in notes"
                     @remove="removeNote(index)"
                     @edit="editNote(note)"
                     :note="note"
                     :key="note.id"
          ></note-item>
      </transition-group>
    </section>
</template>

<template id="note-item">
    <li class="notes__item">
      <button :class="className"
          @click.self="$emit('edit')"
      >
        {{ note.title }}
      </button>
      <button class="notes__item__remove button alert pull-right"
              @click="$emit('remove')"
      >
        <i class="fa fa-times"></i>
      </button>
    </li>
</template>
<template id="loading-item">
   <div class="loading-item">
      <div class="content">
        <p>Please wait for confirmation and it can take some time</p>
      </div>
   </div>
</template>

  <!-- 
<div id="app">
</div>  

 -->

<script type="text/javascript" src="http://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js" ></script>
<!-- <script type="text/javascript" src="https://unpkg.com/vuex@3.0.1/dist/vuex.js" ></script> -->
<script type="text/javascript" src="https://unpkg.com/vue-router@3.0.1/dist/vue-router.js" ></script>
<script src='//unpkg.com/vuetify/dist/vuetify.min.js'></script>
<script type="text/javascript" src="js/nebPay.js" ></script>
<script type="text/javascript">
  var NebPay = require("nebpay");
  var nebPay = new NebPay();
</script>
<script type="text/javascript" src="js/screens/main.js" ></script>
<script type="text/javascript" src="js/screens/todo.js" ></script>
<script type="text/javascript" src="js/screens/app.js" ></script>

</body>
</html>